{"remainingRequest":"E:\\Webstorm_program\\Echarts-Vue\\Day03\\Echarts-Vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Webstorm_program\\Echarts-Vue\\Day03\\Echarts-Vue\\src\\components\\Rank.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Webstorm_program\\Echarts-Vue\\Day03\\Echarts-Vue\\src\\components\\Rank.vue","mtime":1614924310794},{"path":"E:\\Webstorm_program\\Echarts-Vue\\Day03\\Echarts-Vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Webstorm_program\\Echarts-Vue\\Day03\\Echarts-Vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\Webstorm_program\\Echarts-Vue\\Day03\\Echarts-Vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Webstorm_program\\Echarts-Vue\\Day03\\Echarts-Vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCcKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgY2hhcnRJbnN0YW5jZTogbnVsbCwKICAgICAgYWxsRGF0YTogbnVsbCwKICAgICAgc3RhcnRWYWx1ZTogMCwgLy8g5Yy65Z+f57yp5pS+55qE6LW354K55YC8CiAgICAgIGVuZFZhbHVlOiA5LCAvLyDljLrln5/nvKnmlL7nmoTnu4jngrnlgLwKICAgICAgdGltZXJJZDogbnVsbCAvLyDlrprml7blmajnmoTmoIfor4YKICAgIH0KICB9LAogIGNyZWF0ZWQgKCkgewogICAgLy8g5Zyo57uE5Lu25Yib5bu65a6M5oiQ5LmL5ZCOIOi/m+ihjOWbnuiwg+WHveaVsOeahOazqOWGjAogICAgdGhpcy4kc29ja2V0LnJlZ2lzdGVyQ2FsbEJhY2soJ3JhbmtEYXRhJywgdGhpcy5nZXREYXRhKQogIH0sCiAgbW91bnRlZCAoKSB7CiAgICB0aGlzLmluaXRDaGFydCgpCiAgICAvLyB0aGlzLmdldERhdGEoKQogICAgdGhpcy4kc29ja2V0LnNlbmQoewogICAgICBhY3Rpb246ICdnZXREYXRhJywKICAgICAgc29ja2V0VHlwZTogJ3JhbmtEYXRhJywKICAgICAgY2hhcnROYW1lOiAncmFuaycsCiAgICAgIHZhbHVlOiAnJwogICAgfSkKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLnNjcmVlbkFkYXB0ZXIpCiAgICB0aGlzLnNjcmVlbkFkYXB0ZXIoKQogIH0sCiAgZGVzdHJveWVkICgpIHsKICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLnNjcmVlbkFkYXB0ZXIpCiAgICBjbGVhckludGVydmFsKHRoaXMudGltZXJJZCkKICAgIHRoaXMuJHNvY2tldC51blJlZ2lzdGVyQ2FsbEJhY2soJ3JhbmtEYXRhJykKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXRDaGFydCAoKSB7CiAgICAgIHRoaXMuY2hhcnRJbnN0YW5jZSA9IHRoaXMuJGVjaGFydHMuaW5pdCh0aGlzLiRyZWZzLnJhbmtfcmVmLCB0aGlzLnRoZW1lKQogICAgICBjb25zdCBpbml0T3B0aW9uID0gewogICAgICAgIHRpdGxlOiB7CiAgICAgICAgICB0ZXh0OiAn8J+SmSDlnLDljLrplIDllK7mjpLooYwnLAogICAgICAgICAgbGVmdDogMjAsCiAgICAgICAgICB0b3A6IDIwCiAgICAgICAgfSwKICAgICAgICBncmlkOiB7CiAgICAgICAgICB0b3A6ICc0MCUnLAogICAgICAgICAgbGVmdDogJzUlJywKICAgICAgICAgIHJpZ2h0OiAnNSUnLAogICAgICAgICAgYm90dG9tOiAnNSUnLAogICAgICAgICAgY29udGFpbkxhYmVsOiB0cnVlCiAgICAgICAgfSwKICAgICAgICB0b29sdGlwOiB7CiAgICAgICAgICBzaG93OiB0cnVlCiAgICAgICAgfSwKICAgICAgICB4QXhpczogewogICAgICAgICAgdHlwZTogJ2NhdGVnb3J5JwogICAgICAgIH0sCiAgICAgICAgeUF4aXM6IHsKICAgICAgICAgIHR5cGU6ICd2YWx1ZScKICAgICAgICB9LAogICAgICAgIHNlcmllczogWwogICAgICAgICAgewogICAgICAgICAgICB0eXBlOiAnYmFyJwogICAgICAgICAgfQogICAgICAgIF0KICAgICAgfQogICAgICB0aGlzLmNoYXJ0SW5zdGFuY2Uuc2V0T3B0aW9uKGluaXRPcHRpb24pCiAgICAgIHRoaXMuY2hhcnRJbnN0YW5jZS5vbignbW91c2VvdmVyJywgKCkgPT4gewogICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcklkKQogICAgICB9KQogICAgICB0aGlzLmNoYXJ0SW5zdGFuY2Uub24oJ21vdXNlb3V0JywgKCkgPT4gewogICAgICAgIHRoaXMuc3RhcnRJbnRlcnZhbCgpCiAgICAgIH0pCiAgICB9LAogICAgZ2V0RGF0YSAocmV0KSB7CiAgICAgIC8vIOiOt+WPluacjeWKoeWZqOeahOaVsOaNriwg5a+5dGhpcy5hbGxEYXRh6L+b6KGM6LWL5YC85LmL5ZCOLCDosIPnlKh1cGRhdGVDaGFydOaWueazleabtOaWsOWbvuihqAogICAgICAvLyBjb25zdCB7IGRhdGE6IHJldCB9ID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoJ3JhbmsnKQogICAgICB0aGlzLmFsbERhdGEgPSByZXQKICAgICAgLy8g5a+5YWxsRGF0YemHjOmdoueahOavj+S4gOS4quWFg+e0oOi/m+ihjOaOkuW6jywg5LuO5aSn5Yiw5bCP6L+b6KGMCiAgICAgIHRoaXMuYWxsRGF0YS5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgcmV0dXJuIGIudmFsdWUgLSBhLnZhbHVlCiAgICAgIH0pCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuYWxsRGF0YSkKICAgICAgdGhpcy51cGRhdGVDaGFydCgpCiAgICAgIHRoaXMuc3RhcnRJbnRlcnZhbCgpCiAgICB9LAogICAgdXBkYXRlQ2hhcnQgKCkgewogICAgICBjb25zdCBjb2xvckFyciA9IFsKICAgICAgICBbJyMwQkE4MkMnLCAnIzRGRjc3OCddLAogICAgICAgIFsnIzJFNzJCRicsICcjMjNFNUU1J10sCiAgICAgICAgWycjNTA1MkVFJywgJyNBQjZFRTUnXQogICAgICBdCiAgICAgIC8vIOWkhOeQhuWbvuihqOmcgOimgeeahOaVsOaNrgogICAgICAvLyDmiYDmnInnnIHku73miYDlvaLmiJDnmoTmlbDnu4QKICAgICAgY29uc3QgcHJvdmluY2VBcnIgPSB0aGlzLmFsbERhdGEubWFwKGl0ZW0gPT4gewogICAgICAgIHJldHVybiBpdGVtLm5hbWUKICAgICAgfSkKICAgICAgLy8g5omA5pyJ55yB5Lu95a+55bqU55qE6ZSA5ZSu6YeR6aKdCiAgICAgIGNvbnN0IHZhbHVlQXJyID0gdGhpcy5hbGxEYXRhLm1hcChpdGVtID0+IHsKICAgICAgICByZXR1cm4gaXRlbS52YWx1ZQogICAgICB9KQogICAgICBjb25zdCBkYXRhT3B0aW9uID0gewogICAgICAgIHhBeGlzOiB7CiAgICAgICAgICBkYXRhOiBwcm92aW5jZUFycgogICAgICAgIH0sCiAgICAgICAgZGF0YVpvb206IHsKICAgICAgICAgIHNob3c6IGZhbHNlLAogICAgICAgICAgc3RhcnRWYWx1ZTogdGhpcy5zdGFydFZhbHVlLAogICAgICAgICAgZW5kVmFsdWU6IHRoaXMuZW5kVmFsdWUKICAgICAgICB9LAogICAgICAgIHNlcmllczogWwogICAgICAgICAgewogICAgICAgICAgICBkYXRhOiB2YWx1ZUFyciwKICAgICAgICAgICAgaXRlbVN0eWxlOiB7CiAgICAgICAgICAgICAgY29sb3I6IGFyZyA9PiB7CiAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0Q29sb3JBcnIgPSBudWxsCiAgICAgICAgICAgICAgICBpZiAoYXJnLnZhbHVlID4gMzAwKSB7CiAgICAgICAgICAgICAgICAgIHRhcmdldENvbG9yQXJyID0gY29sb3JBcnJbMF0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXJnLnZhbHVlID4gMjAwKSB7CiAgICAgICAgICAgICAgICAgIHRhcmdldENvbG9yQXJyID0gY29sb3JBcnJbMV0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHRhcmdldENvbG9yQXJyID0gY29sb3JBcnJbMl0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdGhpcy4kZWNoYXJ0cy5ncmFwaGljLkxpbmVhckdyYWRpZW50KDAsIDAsIDAsIDEsIFsKICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIG9mZnNldDogMCwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogdGFyZ2V0Q29sb3JBcnJbMF0KICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIG9mZnNldDogMSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogdGFyZ2V0Q29sb3JBcnJbMV0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgXSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICBdCiAgICAgIH0KICAgICAgdGhpcy5jaGFydEluc3RhbmNlLnNldE9wdGlvbihkYXRhT3B0aW9uKQogICAgfSwKICAgIHNjcmVlbkFkYXB0ZXIgKCkgewogICAgICBjb25zdCB0aXRsZUZvbnRTaXplID0gdGhpcy4kcmVmcy5yYW5rX3JlZi5vZmZzZXRXaWR0aCAvIDEwMCAqIDMuNgogICAgICBjb25zdCBhZGFwdGVyT3B0aW9uID0gewogICAgICAgIHRpdGxlOiB7CiAgICAgICAgICB0ZXh0U3R5bGU6IHsKICAgICAgICAgICAgZm9udFNpemU6IHRpdGxlRm9udFNpemUKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHNlcmllczogWwogICAgICAgICAgewogICAgICAgICAgICBiYXJXaWR0aDogdGl0bGVGb250U2l6ZSwKICAgICAgICAgICAgaXRlbVN0eWxlOiB7CiAgICAgICAgICAgICAgYmFyQm9yZGVyUmFkaXVzOiBbdGl0bGVGb250U2l6ZSAvIDIsIHRpdGxlRm9udFNpemUgLyAyLCAwLCAwXQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgXQogICAgICB9CiAgICAgIHRoaXMuY2hhcnRJbnN0YW5jZS5zZXRPcHRpb24oYWRhcHRlck9wdGlvbikKICAgICAgdGhpcy5jaGFydEluc3RhbmNlLnJlc2l6ZSgpCiAgICB9LAogICAgc3RhcnRJbnRlcnZhbCAoKSB7CiAgICAgIGlmICh0aGlzLnRpbWVySWQpIHsKICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZXJJZCkKICAgICAgfQogICAgICB0aGlzLnRpbWVySWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgdGhpcy5zdGFydFZhbHVlKysKICAgICAgICB0aGlzLmVuZFZhbHVlKysKICAgICAgICBpZiAodGhpcy5lbmRWYWx1ZSA+IHRoaXMuYWxsRGF0YS5sZW5ndGggLSAxKSB7CiAgICAgICAgICB0aGlzLnN0YXJ0VmFsdWUgPSAwCiAgICAgICAgICB0aGlzLmVuZFZhbHVlID0gOQogICAgICAgIH0KICAgICAgICB0aGlzLnVwZGF0ZUNoYXJ0KCkKICAgICAgfSwgMjAwMCkKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZShbJ3RoZW1lJ10pCiAgfSwKICB3YXRjaDogewogICAgdGhlbWUgKCkgewogICAgICBjb25zb2xlLmxvZygn5Li76aKY5YiH5o2i5LqGJykKICAgICAgdGhpcy5jaGFydEluc3RhbmNlLmRpc3Bvc2UoKSAvLyDplIDmr4HlvZPliY3nmoTlm77ooagKICAgICAgdGhpcy5pbml0Q2hhcnQoKSAvLyDph43mlrDku6XmnIDmlrDnmoTkuLvpopjlkI3np7DliJ3lp4vljJblm77ooajlr7nosaEKICAgICAgdGhpcy5zY3JlZW5BZGFwdGVyKCkgLy8g5a6M5oiQ5bGP5bmV55qE6YCC6YWNCiAgICAgIHRoaXMudXBkYXRlQ2hhcnQoKSAvLyDmm7TmlrDlm77ooajnmoTlsZXnpLoKICAgIH0KICB9Cn0K"},{"version":3,"sources":["Rank.vue"],"names":[],"mappings":";;;;;;;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Rank.vue","sourceRoot":"src/components","sourcesContent":["<!-- Âú∞Âå∫ÈîÄÂîÆÊéíË°å -->\n<template>\n  <div class='com-container'>\n    <div class='com-chart' ref='rank_ref'></div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nexport default {\n  data () {\n    return {\n      chartInstance: null,\n      allData: null,\n      startValue: 0, // Âå∫ÂüüÁº©ÊîæÁöÑËµ∑ÁÇπÂÄº\n      endValue: 9, // Âå∫ÂüüÁº©ÊîæÁöÑÁªàÁÇπÂÄº\n      timerId: null // ÂÆöÊó∂Âô®ÁöÑÊ†áËØÜ\n    }\n  },\n  created () {\n    // Âú®ÁªÑ‰ª∂ÂàõÂª∫ÂÆåÊàê‰πãÂêé ËøõË°åÂõûË∞ÉÂáΩÊï∞ÁöÑÊ≥®ÂÜå\n    this.$socket.registerCallBack('rankData', this.getData)\n  },\n  mounted () {\n    this.initChart()\n    // this.getData()\n    this.$socket.send({\n      action: 'getData',\n      socketType: 'rankData',\n      chartName: 'rank',\n      value: ''\n    })\n    window.addEventListener('resize', this.screenAdapter)\n    this.screenAdapter()\n  },\n  destroyed () {\n    window.removeEventListener('resize', this.screenAdapter)\n    clearInterval(this.timerId)\n    this.$socket.unRegisterCallBack('rankData')\n  },\n  methods: {\n    initChart () {\n      this.chartInstance = this.$echarts.init(this.$refs.rank_ref, this.theme)\n      const initOption = {\n        title: {\n          text: 'üíô Âú∞Âå∫ÈîÄÂîÆÊéíË°å',\n          left: 20,\n          top: 20\n        },\n        grid: {\n          top: '40%',\n          left: '5%',\n          right: '5%',\n          bottom: '5%',\n          containLabel: true\n        },\n        tooltip: {\n          show: true\n        },\n        xAxis: {\n          type: 'category'\n        },\n        yAxis: {\n          type: 'value'\n        },\n        series: [\n          {\n            type: 'bar'\n          }\n        ]\n      }\n      this.chartInstance.setOption(initOption)\n      this.chartInstance.on('mouseover', () => {\n        clearInterval(this.timerId)\n      })\n      this.chartInstance.on('mouseout', () => {\n        this.startInterval()\n      })\n    },\n    getData (ret) {\n      // Ëé∑ÂèñÊúçÂä°Âô®ÁöÑÊï∞ÊçÆ, ÂØπthis.allDataËøõË°åËµãÂÄº‰πãÂêé, Ë∞ÉÁî®updateChartÊñπÊ≥ïÊõ¥Êñ∞ÂõæË°®\n      // const { data: ret } = await this.$http.get('rank')\n      this.allData = ret\n      // ÂØπallDataÈáåÈù¢ÁöÑÊØè‰∏Ä‰∏™ÂÖÉÁ¥†ËøõË°åÊéíÂ∫è, ‰ªéÂ§ßÂà∞Â∞èËøõË°å\n      this.allData.sort((a, b) => {\n        return b.value - a.value\n      })\n      console.log(this.allData)\n      this.updateChart()\n      this.startInterval()\n    },\n    updateChart () {\n      const colorArr = [\n        ['#0BA82C', '#4FF778'],\n        ['#2E72BF', '#23E5E5'],\n        ['#5052EE', '#AB6EE5']\n      ]\n      // Â§ÑÁêÜÂõæË°®ÈúÄË¶ÅÁöÑÊï∞ÊçÆ\n      // ÊâÄÊúâÁúÅ‰ªΩÊâÄÂΩ¢ÊàêÁöÑÊï∞ÁªÑ\n      const provinceArr = this.allData.map(item => {\n        return item.name\n      })\n      // ÊâÄÊúâÁúÅ‰ªΩÂØπÂ∫îÁöÑÈîÄÂîÆÈáëÈ¢ù\n      const valueArr = this.allData.map(item => {\n        return item.value\n      })\n      const dataOption = {\n        xAxis: {\n          data: provinceArr\n        },\n        dataZoom: {\n          show: false,\n          startValue: this.startValue,\n          endValue: this.endValue\n        },\n        series: [\n          {\n            data: valueArr,\n            itemStyle: {\n              color: arg => {\n                let targetColorArr = null\n                if (arg.value > 300) {\n                  targetColorArr = colorArr[0]\n                } else if (arg.value > 200) {\n                  targetColorArr = colorArr[1]\n                } else {\n                  targetColorArr = colorArr[2]\n                }\n                return new this.$echarts.graphic.LinearGradient(0, 0, 0, 1, [\n                  {\n                    offset: 0,\n                    color: targetColorArr[0]\n                  },\n                  {\n                    offset: 1,\n                    color: targetColorArr[1]\n                  }\n                ])\n              }\n            }\n          }\n        ]\n      }\n      this.chartInstance.setOption(dataOption)\n    },\n    screenAdapter () {\n      const titleFontSize = this.$refs.rank_ref.offsetWidth / 100 * 3.6\n      const adapterOption = {\n        title: {\n          textStyle: {\n            fontSize: titleFontSize\n          }\n        },\n        series: [\n          {\n            barWidth: titleFontSize,\n            itemStyle: {\n              barBorderRadius: [titleFontSize / 2, titleFontSize / 2, 0, 0]\n            }\n          }\n        ]\n      }\n      this.chartInstance.setOption(adapterOption)\n      this.chartInstance.resize()\n    },\n    startInterval () {\n      if (this.timerId) {\n        clearInterval(this.timerId)\n      }\n      this.timerId = setInterval(() => {\n        this.startValue++\n        this.endValue++\n        if (this.endValue > this.allData.length - 1) {\n          this.startValue = 0\n          this.endValue = 9\n        }\n        this.updateChart()\n      }, 2000)\n    }\n  },\n  computed: {\n    ...mapState(['theme'])\n  },\n  watch: {\n    theme () {\n      console.log('‰∏ªÈ¢òÂàáÊç¢‰∫Ü')\n      this.chartInstance.dispose() // ÈîÄÊØÅÂΩìÂâçÁöÑÂõæË°®\n      this.initChart() // ÈáçÊñ∞‰ª•ÊúÄÊñ∞ÁöÑ‰∏ªÈ¢òÂêçÁß∞ÂàùÂßãÂåñÂõæË°®ÂØπË±°\n      this.screenAdapter() // ÂÆåÊàêÂ±èÂπïÁöÑÈÄÇÈÖç\n      this.updateChart() // Êõ¥Êñ∞ÂõæË°®ÁöÑÂ±ïÁ§∫\n    }\n  }\n}\n</script>\n\n<style lang='less' scoped>\n</style>\n"]}]}